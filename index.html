<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Siyakhathala ‚Äì We Care</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">
  <!-- Header -->
  <header class="bg-green-700 text-white shadow-md relative">
    <div class="max-w-6xl mx-auto flex justify-between items-center p-4">
      <div>
        <h1 class="text-2xl font-extrabold">Siyakhathala</h1>
        <p class="text-xs italic text-gray-200 -mt-1">We Care</p>
      </div>
      <nav>
        <ul class="flex space-x-6">
          <li><a href="#" class="hover:underline">Home</a></li>
          <li><a href="#how-it-works" class="hover:underline">How it Works</a></li>
          <li><a href="#features" class="hover:underline">Features</a></li>
          <li><a href="report.html" class="hover:underline">Report Issue</a></li>
        </ul>
      </nav>
    </div>
    <div class="flex h-1">
      <div class="flex-1 bg-black"></div>
      <div class="flex-1 bg-yellow-500"></div>
      <div class="flex-1 bg-red-600"></div>
      <div class="flex-1 bg-blue-600"></div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-white py-20">
    <div class="max-w-6xl mx-auto text-center px-6">
      <h2 class="text-4xl font-extrabold text-gray-800 mb-2">Siyakhathala</h2>
      <p class="text-sm italic text-gray-500 mb-6">We Care</p>
      <p class="text-lg text-gray-600 mb-8">
        Help us build safer and better communities across South Africa.  
        Report potholes, broken streetlights, water leaks, and more ‚Äì quickly and easily.
      </p>
      <div class="mt-4 flex justify-center gap-4">
        <a href="report.html" class="bg-green-700 hover:bg-green-800 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition">
          Report an Issue
        </a>
        <button id="showLatest" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition">
          Latest Reported Issue
        </button>
      </div>
    </div>
  </section>

  <!-- Latest Issue Modal -->
  <div id="latestModal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50">
    <div class="bg-white p-8 rounded-lg shadow-lg max-w-xl w-full relative">
      <button id="closeModal" class="absolute top-2 right-2 text-red-500 font-bold text-xl">‚úñ</button>
      <div id="dashboardContent" class="space-y-4 text-center">Loading...</div>
    </div>
  </div>

  <!-- How it Works -->
  <section id="how-it-works" class="py-16 bg-gray-100">
    <div class="max-w-6xl mx-auto px-6">
      <h3 class="text-2xl font-bold text-center mb-10">How it Works</h3>
      <div class="grid md:grid-cols-3 gap-8 text-center">
        <div class="p-6 bg-white rounded-xl shadow border-t-4 border-yellow-500">
          <span class="text-green-700 text-4xl">üìç</span>
          <h4 class="mt-4 font-semibold text-lg">1. Pin the Location</h4>
          <p class="text-gray-600">Select the exact location of the issue on the map.</p>
        </div>
        <div class="p-6 bg-white rounded-xl shadow border-t-4 border-red-600">
          <span class="text-green-700 text-4xl">üì∑</span>
          <h4 class="mt-4 font-semibold text-lg">2. Upload Photos</h4>
          <p class="text-gray-600">Take a picture of the problem for faster response.</p>
        </div>
        <div class="p-6 bg-white rounded-xl shadow border-t-4 border-blue-600">
          <span class="text-green-700 text-4xl">‚úÖ</span>
          <h4 class="mt-4 font-semibold text-lg">3. Submit Report</h4>
          <p class="text-gray-600">Send your report directly to the right department.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section id="features" class="py-20 bg-white">
    <div class="max-w-6xl mx-auto px-6 text-center">
      <h3 class="text-3xl font-bold mb-12">Why Choose Siyakhathala?</h3>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="p-6 bg-gray-50 rounded-xl shadow border-l-4 border-yellow-500">
          <span class="text-green-700 text-4xl">ü§ñ</span>
          <h4 class="mt-4 font-semibold text-lg">AI Categorization</h4>
          <p class="text-gray-600">Upload a photo and our AI auto-detects whether it‚Äôs a pothole, broken light, or dumping site.</p>
        </div>
        <div class="p-6 bg-gray-50 rounded-xl shadow border-l-4 border-red-600">
          <span class="text-green-700 text-4xl">üó∫Ô∏è</span>
          <h4 class="mt-4 font-semibold text-lg">Live Issue Map</h4>
          <p class="text-gray-600">Pin the exact location and track issues across your community in real-time.</p>
        </div>
        <div class="p-6 bg-gray-50 rounded-xl shadow border-l-4 border-blue-600">
          <span class="text-green-700 text-4xl">‚öñÔ∏è</span>
          <h4 class="mt-4 font-semibold text-lg">Severity Scale</h4>
          <p class="text-gray-600">Our AI ranks issues from minor to critical, helping municipalities prioritize faster.</p>
        </div>
        <div class="p-6 bg-gray-50 rounded-xl shadow border-l-4 border-black">
          <span class="text-green-700 text-4xl">‚è≥</span>
          <h4 class="mt-4 font-semibold text-lg">Response Timer</h4>
          <p class="text-gray-600">Track how long it‚Äôs been since the issue was reported. Hold government accountable.</p>
        </div>
        <div class="p-6 bg-gray-50 rounded-xl shadow border-l-4 border-yellow-500">
          <span class="text-green-700 text-4xl">üìä</span>
          <h4 class="mt-4 font-semibold text-lg">Smart City Dashboard</h4>
          <p class="text-gray-600">Municipalities get a live dashboard to resolve and prioritize issues efficiently.</p>
        </div>
        <div class="p-6 bg-gray-50 rounded-xl shadow border-l-4 border-red-600">
          <span class="text-green-700 text-4xl">üåç</span>
          <h4 class="mt-4 font-semibold text-lg">Scalable Impact</h4>
          <p class="text-gray-600">Built for South Africa, designed to scale across Africa‚Äôs growing smart cities.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-400 py-8">
    <div class="max-w-6xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center">
      <div>
        <h4 class="text-white font-bold">Siyakhathala</h4>
        <p class="text-xs italic text-gray-400 -mt-1">We Care</p>
      </div>
      <ul class="flex space-x-6 mt-4 md:mt-0">
        <li><a href="#" class="hover:text-white">Privacy Policy</a></li>
        <li><a href="#" class="hover:text-white">Terms</a></li>
      </ul>
    </div>
    <div class="flex h-1 mt-4">
      <div class="flex-1 bg-black"></div>
      <div class="flex-1 bg-yellow-500"></div>
      <div class="flex-1 bg-red-600"></div>
      <div class="flex-1 bg-blue-600"></div>
    </div>
  </footer>

  <script>
    const showBtn = document.getElementById('showLatest');
    const modal = document.getElementById('latestModal');
    const closeModal = document.getElementById('closeModal');
    const dashboard = document.getElementById('dashboardContent');

    showBtn.addEventListener('click', () => {
      modal.classList.remove('hidden');

      const issueDataJSON = localStorage.getItem('issueData');
      if (!issueDataJSON) {
        dashboard.innerHTML = "<p class='text-red-500'>No issue data found. Please submit an issue first.</p>";
        return;
      }

      const issueData = JSON.parse(issueDataJSON);
      const coords = issueData.latitude && issueData.longitude ? `${issueData.latitude}, ${issueData.longitude}` : "Not specified";
      const photoURL = issueData.photoDataUrl || "";
      const submittedDate = issueData.submittedAt ? new Date(issueData.submittedAt) : new Date();
      const diffDays = Math.floor((new Date() - submittedDate)/(1000*60*60*24));
      const reportedText = diffDays === 0 ? "Reported today" : `Reported ${diffDays} day(s) ago`;

      dashboard.innerHTML = `
        ${photoURL ? `<img src="${photoURL}" alt="Issue Photo" class="mx-auto mb-4 rounded-lg shadow-md max-h-96" />` : ""}
        <h3 class="text-xl font-semibold">${issueData.category || "No Category"}</h3>
        <p class="text-gray-700">${issueData.description || "No description provided."}</p>
        <p class="text-gray-600 mt-2">Coordinates: ${coords}</p>
        <p class="text-gray-600">${reportedText}</p>
      `;
    });

    closeModal.addEventListener('click', () => modal.classList.add('hidden'));
  </script>
</body>
</html>
